{{- define "main" -}}
<main class="container">
  {{- if .IsHome -}}
    {{- with .Site.GetPage "section" "posts" -}}
      <section>
        <ul class="post-list">
          {{- range .Paginator.Pages -}}
          <li class="post-item">
            <a href="{{ .RelPermalink }}">
              <h2 class="post-title">{{ .Title }}</h2>
              <div class="post-meta">
                {{- with .Date -}}<time datetime="{{ .Format "2006-01-02" }}">{{ .Format "2006-01-02" }}</time>{{- end -}}
                {{- with .Params.tags -}}
                  <span>
                    {{- range $index, $tag := . -}}
                      {{- if gt $index 0 }}, {{ end -}}
                      #{{ $tag }}
                    {{- end -}}
                  </span>
                {{- end -}}
              </div>
              {{- with .Summary -}}
              <p class="post-summary">{{ . }}</p>
              {{- end -}}
            </a>
          </li>
          {{- end -}}
        </ul>
        {{- partial "pagination.html" .Paginator -}}
      </section>
    {{- else -}}
      <p>还没有发布文章，使用 <code>hugo new posts/hello-world.md</code> 创建第一篇文章。</p>
    {{- end -}}
  {{- else -}}
    <section>
      <h1>{{ .Title }}</h1>
      <ul class="post-list">
        {{- range .Paginator.Pages -}}
        <li class="post-item">
          <a href="{{ .RelPermalink }}">
            <h2 class="post-title">{{ .Title }}</h2>
            <div class="post-meta">
              {{- with .Date -}}<time datetime="{{ .Format "2006-01-02" }}">{{ .Format "2006-01-02" }}</time>{{- end -}}
            </div>
            {{- with .Summary -}}
            <p class="post-summary">{{ . }}</p>
            {{- end -}}
          </a>
        </li>
        {{- end -}}
      </ul>
      {{- partial "pagination.html" .Paginator -}}
    </section>
  {{- end -}}
</main>
{{- end -}}
