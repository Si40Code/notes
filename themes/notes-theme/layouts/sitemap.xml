{{- $sitemap := .Site.Data.sitemap -}}
{{- $changefreq := "weekly" -}}
{{- $priority := 0.5 -}}
{{- if $sitemap -}}
  {{- $changefreq = $sitemap.changefreq | default "weekly" -}}
  {{- $priority = $sitemap.priority | default 0.5 -}}
{{- end -}}
{{- printf "<?xml version=\"1.0\" encoding=\"utf-8\" standalone=\"yes\"?>" | safeHTML }}
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"
  xmlns:xhtml="http://www.w3.org/1999/xhtml">
  {{- range .Data.Pages }}
  {{- if ne .Kind "404" }}
  <url>
    <loc>{{ .Permalink }}</loc>{{ if not .Lastmod.IsZero }}
    <lastmod>{{ safeHTML ( .Lastmod.Format "2006-01-02T15:04:05-07:00" ) }}</lastmod>{{ end }}{{ if ne .Kind "home" }}
    <changefreq>{{ if eq .Kind "page" }}monthly{{ else if eq .Kind "section" }}weekly{{ else }}daily{{ end }}</changefreq>
    <priority>{{ if eq .Kind "page" }}0.8{{ else if eq .Kind "section" }}0.6{{ else }}0.9{{ end }}</priority>{{ else }}
    <changefreq>{{ $changefreq }}</changefreq>
    <priority>{{ $priority }}</priority>{{ end }}
  </url>
  {{- end }}
  {{- end }}
</urlset>
